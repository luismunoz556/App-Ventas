function eliminarProducto(e,t){document.getElementById("id-producto-eliminar").value=e,document.getElementById("nombre-producto").textContent=t,document.getElementById("modal-eliminar").style.display="flex"}function eliminarCliente(e,t){document.getElementById("id-cliente-eliminar").value=e,document.getElementById("nombre-cliente").textContent=t,document.getElementById("modal-eliminar").style.display="flex"}function cerrarModal(){document.getElementById("modal-eliminar").style.display="none"}function inicializarProductos(){const e=document.getElementById("buscar-productos");e&&e.addEventListener("input",function(e){const t=e.target.value.toLowerCase();document.querySelectorAll(".tabla-productos tbody tr").forEach(e=>{e.textContent.toLowerCase().includes(t)?e.style.display="":e.style.display="none"})});const t=document.getElementById("modal-eliminar");t&&t.addEventListener("click",function(e){e.target===this&&cerrarModal()})}function inicializarClientes(){const e=document.getElementById("buscar-clientes");e&&e.addEventListener("input",function(e){const t=e.target.value.toLowerCase();document.querySelectorAll(".tabla-clientes tbody tr").forEach(e=>{e.textContent.toLowerCase().includes(t)?e.style.display="":e.style.display="none"})});const t=document.getElementById("modal-eliminar");t&&t.addEventListener("click",function(e){e.target===this&&cerrarModal()})}function inicializarFormularioPedidos(){const e=document.getElementById("lista-productos"),t=document.getElementById("tpl-tarjeta-producto"),n=document.getElementById("btn-agregar-producto"),o=document.getElementById("total"),i=document.getElementById("tipo_pago"),l=document.getElementById("credito"),a=document.getElementById("cantidad-productos"),c=document.getElementById("total-pedido");if(!e||!t||!n)return;let r=0,d=1;function s(e){return parseFloat(e||0).toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})}function u(){let t=0,n=0;e.querySelectorAll(".tarjeta-producto").forEach(e=>{const o=parseFloat(e.querySelector(".input-cantidad")?.value||"0"),i=o*parseFloat(e.querySelector(".input-precio")?.value||"0"),l=e.querySelector(".input-subtotal");Number.isNaN(i)||(t+=i,n+=o,l&&(l.value=s(i)))}),o&&(o.value=t.toFixed(2)),c&&(c.textContent="$"+s(t)),a&&(a.textContent=n)}function m(){const n=t.innerHTML.replaceAll("__INDEX__",String(r++)).replace("__NUM__",String(d++)),o=document.createElement("div");o.innerHTML=n;const i=o.querySelector(".tarjeta-producto");i&&(i.style.opacity="0",i.style.transform="translateY(-10px)",e.appendChild(i),setTimeout(()=>{i.style.transition="all 0.3s ease-in",i.style.opacity="1",i.style.transform="translateY(0)"},10),function(t){const n=t.querySelector(".select-producto, .input-producto-id"),o=t.querySelector(".input-cantidad"),i=t.querySelector(".input-precio"),l=t.querySelector(".btn-eliminar-producto");n&&"SELECT"===n.tagName&&n.addEventListener("change",function(){const e=this.options[this.selectedIndex],t=parseFloat(e.getAttribute("data-precio")||"0");!Number.isNaN(t)&&i&&(i.value=t.toFixed(2),u())}),[o,i].forEach(e=>{e&&e.addEventListener("input",function(){u()})}),l&&l.addEventListener("click",function(){e.querySelectorAll(".tarjeta-producto").length<=1?alert("Debe haber al menos un producto en el pedido"):(t.style.animation="fadeOut 0.3s ease-out",setTimeout(()=>{t.remove(),u()},300))})}(i),u())}function y(){i&&l&&("credito"===i.value?(l.removeAttribute("readonly"),l.style.backgroundColor="#fff"):(l.setAttribute("readonly","readonly"),l.value="0",l.style.backgroundColor="#f5f5f5"))}n.addEventListener("click",m),i&&(i.addEventListener("change",y),y()),m()}document.addEventListener("DOMContentLoaded",function(){console.log("JavaScript cargado correctamente");const e=document.getElementById("mobile-menu-btn"),t=document.getElementById("mobile-menu-dropdown");if(console.log("Botón encontrado:",e),console.log("Dropdown encontrado:",t),e&&t){console.log("Agregando event listeners"),e.addEventListener("click",function(e){console.log("Click en botón hamburguesa"),e.stopPropagation(),t.classList.toggle("active"),console.log("Clase active toggleada")}),document.addEventListener("click",function(n){e.contains(n.target)||t.contains(n.target)||t.classList.remove("active")});t.querySelectorAll(".mobile-nav-item").forEach(e=>{e.addEventListener("click",function(){t.classList.remove("active")})}),t.addEventListener("click",function(e){e.stopPropagation()})}else console.log("No se encontraron los elementos del menú móvil");inicializarProductos(),inicializarClientes(),inicializarFormularioPedidos()});